<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avatar Fix Verification</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        .avatar-container { width: 150px; height: 150px; border-radius: 50%; overflow: hidden; border: 3px solid #ddd; margin: 10px; display: inline-block; }
        .avatar { width: 100%; height: 100%; object-fit: cover; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>üîç Avatar Fix Verification Test</h1>
    
    <div class="status info">
        <h3>Status Perbaikan:</h3>
        <ul>
            <li>‚úÖ Menghapus <code>crossOrigin="anonymous"</code></li>
            <li>‚úÖ Menghapus <code>referrerPolicy="no-referrer"</code></li>
            <li>‚úÖ Menggunakan fallback strategy sederhana</li>
            <li>‚úÖ Error handling yang lebih baik</li>
        </ul>
    </div>

    <h2>Test URLs yang Reliable:</h2>
    <div class="test-grid">
        <div>
            <h4>Via Placeholder</h4>
            <div class="avatar-container">
                <img class="avatar" src="https://via.placeholder.com/150/9333ea/FFFFFF?text=USER" alt="Test 1">
            </div>
            <p id="result1">Loading...</p>
        </div>
        
        <div>
            <h4>Dummy Image</h4>
            <div class="avatar-container">
                <img class="avatar" src="https://dummyimage.com/150x150/28a745/ffffff&text=OK" alt="Test 2">
            </div>
            <p id="result2">Loading...</p>
        </div>
        
        <div>
            <h4>UI Avatars</h4>
            <div class="avatar-container">
                <img class="avatar" src="https://ui-avatars.com/api/?name=Test User&size=150&background=9333ea&color=fff" alt="Test 3">
            </div>
            <p id="result3">Loading...</p>
        </div>
        
        <div>
            <h4>Another Placeholder</h4>
            <div class="avatar-container">
                <img class="avatar" src="https://via.placeholder.com/150/0066cc/FFFFFF?text=AVATAR" alt="Test 4">
            </div>
            <p id="result4">Loading...</p>
        </div>
    </div>

    <h2>Recommended URLs untuk UKMiverse:</h2>
    <div class="status success">
        <p><strong>Copy URLs ini untuk test di aplikasi:</strong></p>
        <ul>
            <li><code>https://via.placeholder.com/150/9333ea/FFFFFF?text=USER</code></li>
            <li><code>https://dummyimage.com/150x150/28a745/ffffff&text=OK</code></li>
            <li><code>https://ui-avatars.com/api/?name=Test User&size=150&background=9333ea&color=fff</code></li>
            <li><code>https://via.placeholder.com/150/0066cc/FFFFFF?text=AVATAR</code></li>
        </ul>
    </div>

    <h2>Test Log:</h2>
    <div id="testLog"></div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div class="status ${type}">[${timestamp}] ${message}</div>`;
        }

        // Test each avatar
        document.querySelectorAll('.avatar').forEach((img, index) => {
            const resultId = `result${index + 1}`;
            const resultP = document.getElementById(resultId);
            
            const startTime = Date.now();
            
            img.onload = () => {
                const loadTime = Date.now() - startTime;
                resultP.textContent = `‚úÖ Loaded (${loadTime}ms)`;
                resultP.style.color = 'green';
                log(`‚úÖ Test ${index + 1} berhasil dimuat dalam ${loadTime}ms`, 'success');
            };
            
            img.onerror = () => {
                const loadTime = Date.now() - startTime;
                resultP.textContent = `‚ùå Failed (${loadTime}ms)`;
                resultP.style.color = 'red';
                log(`‚ùå Test ${index + 1} gagal dimuat setelah ${loadTime}ms`, 'error');
            };
        });

        // Summary
        log('üîç Avatar fix verification test dimulai...', 'info');
        log('Perbaikan utama: Menghapus crossOrigin dan referrerPolicy yang menyebabkan CORS error', 'info');
    </script>
</body>
</html>
